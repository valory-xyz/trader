name: decision_maker_abci
author: valory
version: 0.1.0
type: skill
description: This skill is responsible for the decision making and placing the bets.
  It samples a market based on its liquidity, it sends a request to a mech to decide
  what to vote for, it receives the response from the mech, it decides whether voting
  is profitable or not, and ultimately, it either bets or blacklists the market.
license: Apache-2.0
aea_version: '>=1.0.0, <2.0.0'
fingerprint:
  README.md: bafybeia367zzdwndvlhw27rvnwodytjo3ms7gbc3q7mhrrjqjgfasnk47i
  __init__.py: bafybeih563ujnigeci2ldzh7hakbau6a222vsed7leg3b7lq32vcn3nm4a
  behaviours/__init__.py: bafybeih6ddz2ocvm6x6ytvlbcz6oi4snb5ee5xh5h65nq4w2qf7fd7zfky
  behaviours/base.py: bafybeidmat7boku24xi3rtkj26aytnu2eynydm5dcxiswi6flrsj3lxgm4
  behaviours/bet_placement.py: bafybeihmia64t2payxfqcnfdqg675ui2yp3hnyfwb2xhj2hn7wl237b4re
  behaviours/blacklisting.py: bafybeibofq3emoxxcndkozupsyo2xrigewy6ojvzfdvzwruvsvgyilokbu
  behaviours/check_benchmarking.py: bafybeiao2lyj7apezkqrpgsyzb3dwvrdgsrgtprf6iuhsmlsufvxfl5bci
  behaviours/claim_subscription.py: bafybeigbqkhc6mb73rbwaks32tfiqx6u2xza43uiy6rvbtrnqd6m4fru3e
  behaviours/decision_receive.py: bafybeifbgsa7ssnqgnyxkbzcc6t2pt372z3jhgn5rzw6yhevad6r7qiapy
  behaviours/decision_request.py: bafybeiabjzzcwcfbfmtoftjhewmkgbhxfnigbc5cwmmxl6cob5gv64jwwa
  behaviours/handle_failed_tx.py: bafybeidxpc6u575ymct5tdwutvzov6zqfdoio5irgldn3fw7q3lg36mmxm
  behaviours/order_subscription.py: bafybeicrmdvhci5prfldvuf3bclbbqi6j7lpv6hmphw3qwgmkmwat3od44
  behaviours/randomness.py: bafybeidmr33teizrs4uxlo5tdz766ds6os4pe5lttstm7jpmhgmjz5ti3q
  behaviours/reedem.py: bafybeiaszvuwfamdq5m7zaxf3tvbyp6wocsksezfajqv5xpkh43r62cj6u
  behaviours/round_behaviour.py: bafybeibvhobpvzzd37ecleuyp2jrbed6nontcw7urtsilbbzvqsmmupx64
  behaviours/sampling.py: bafybeibtkli72qsvotkrsepkgpiumtr5sershtkpb427oygnszs3dpgxry
  behaviours/storage_manager.py: bafybeibnlg2eirzcxdpnuwbhzne77ear44cqwm4yae5bacgfu4vqqq7d7a
  behaviours/tool_selection.py: bafybeienlxcgjs3ogyofli3d7q3p5rst3mcxxcnwqf7qolqjeefjtixeke
  dialogues.py: bafybeigpwuzku3we7axmxeamg7vn656maww6emuztau5pg3ebsoquyfdqm
  fsm_specification.yaml: bafybeicvrvzcjt4hg5jyr2eleoajpbb7q2fbq2bopmbnwy33fsjdblzygu
  handlers.py: bafybeigod6gbjrxy4mbmulbzsbokeaoycoqys64vqtxnumishfukzf73za
  io_/__init__.py: bafybeifxgmmwjqzezzn3e6keh2bfo4cyo7y5dq2ept3stfmgglbrzfl5rq
  io_/loader.py: bafybeih3sdsx5dhe4kzhtoafexjgkutsujwqy3zcdrlrkhtdks45bc7exa
  models.py: bafybeiafif3kzzyvvme2t6eck4sbpz6saam26jzjg46as2bqm5r5gvd4fq
  payloads.py: bafybeia32ds4ks5g3rhd43w6siy74vi5inaheuxhswiy5ndykxtgncoeu4
  policy.py: bafybeiejesqmoxmuzu5sqkl3qcnze6kp54lxuf4xklwfraxdujniodd2bi
  redeem_info.py: bafybeifiiix4gihfo4avraxt34sfw35v6dqq45do2drrssei2shbps63mm
  rounds.py: bafybeihmj6x7utewuo6yqk4li7pxwkumiz4nsm5mfb6sd35j7kmfhzkhm4
  states/__init__.py: bafybeid23llnyp6j257dluxmrnztugo5llsrog7kua53hllyktz4dqhqoy
  states/base.py: bafybeicrzw6p4dq52adkdjlduplt3expzajqmd3nkcpsw5yalfc3dwv75q
  states/bet_placement.py: bafybeibalhxhp2c4oljmiwqi6ds3g36fgtabmf42mb5sgq6z22znrcbhda
  states/blacklisting.py: bafybeiapelgjhbjjn4uq4z5gspyirqzwzgccg5anktrp5kxdwamfnfw5mi
  states/check_benchmarking.py: bafybeiabv6pq7q45jd3nkor5afmlycqgec5ctuwcfbdukkjjm4imesv4ni
  states/claim_subscription.py: bafybeiampifhdoztggwj6gthl2hfzecmjcwnm6nic2o47q4je7j4x3ujne
  states/decision_receive.py: bafybeibc5o5stxfm47jdwrjkldirgbvvdaprdtkevwahsnedimcyso6wtm
  states/decision_request.py: bafybeiarv3r5j7cfvxmudki2llbdl2pvf24p5mvsva6bdgrylnwdyag5xy
  states/final_states.py: bafybeicjrrojo3gmfaxzicwloyorlnqgzl6a2avevo4nvhoh424zwzmbti
  states/handle_failed_tx.py: bafybeihewm2vernvhktuorljdupjqcg2p5vs6wvsira2d62wkoyo5xlzjm
  states/order_subscription.py: bafybeidrcef2op3nhq4tjgri3ct5hfhmc22xw2ep6dk4ro6tg7ob6cmioa
  states/randomness.py: bafybeifgsyipvvu2e6caggyoo5vsmd64uexuho5ybyf3ry424r7kldcfre
  states/redeem.py: bafybeiblidmpt73ocac73wmakusrnf5267vs7s2foc5pqkrz4vuqgy3b4u
  states/sampling.py: bafybeihriyyskmlupjiwytx2pdpftms7plkjku5bip64c3ztx7oi3n43ci
  states/tool_selection.py: bafybeiak5ihuie4nxh3sguiea6pcdgyxr4k4xyzvq6o2uj5xpf7urocawy
  tests/__init__.py: bafybeiakpi3k3kc7wrjj7hrluvjcj36lu2gezpmrctwiz5yg2fe7ggnf3i
  tests/behaviours/__init__.py: bafybeic7icz7lfhfepdkqkase7y7zn3a6pwdw6fx4ah2hajmgejawpolc4
  tests/behaviours/data/.gitkeep: bafybeiekl43sjsyqfgl6y27ve5ydo4svcngrptgtffblokmspfezroxvvi
  tests/behaviours/dummy_strategy/__init__.py: bafybeiep5w5yckjzy724v63qd5cmzfn3uxytmnizynomxggfobbysfcttq
  tests/behaviours/dummy_strategy/dummy_strategy.py: bafybeig5e3xfr7gxsakfj4stbxqcwdiljl7klvgahkuwe3obzxgkg3qt2e
  tests/behaviours/test_base.py: bafybeif6pglmr7pvojylatfzaxtlk65igx6a2omyrbxfihnnft6o7p75p4
  tests/conftest.py: bafybeidy5hw56kw5mxudnfbhvogofn6k4rqb4ux2bd45baedrrhmgyrude
  tests/test_handlers.py: bafybeihpkgtjjm3uegpup6zkznpoaxqpu6kmp3ujiggrzbe73p5fzlq7im
  tests/test_payloads.py: bafybeigsftkoc7ursy7okfznbwfiy3pk2kitndfgbn35ebbz4yoptkw3zy
  utils/__init__.py: bafybeiazrfg3kwfdl5q45azwz6b6mobqxngxpf4hazmrnkhinpk4qhbbf4
  utils/nevermined.py: bafybeigallaqxhqopznhjhefr6bukh4ojkz5vdtqyzod5dksshrf24fjgi
  utils/scaling.py: bafybeialr3z4zogp4k3l2bzcjfi4igvxzjexmlpgze2bai2ufc3plaow4y
fingerprint_ignore_patterns: []
connections:
- valory/http_server:0.22.0:bafybeihpgu56ovmq4npazdbh6y6ru5i7zuv6wvdglpxavsckyih56smu7m
contracts:
- valory/gnosis_safe:0.1.0:bafybeidcb25wneezfd2iaiqa7ygxlimwwacvycahhenvpw7tdvwdigllzm
- valory/market_maker:0.1.0:bafybeiba25nt26ntjzkkpfyl2ngbjxrfd44ckg3znfhqm552725vb3gaka
- valory/erc20:0.1.0:bafybeia7a7mfjeok4ywpmejz74msofagagcentsudqxfojadmxlur5qolu
- valory/multisend:0.1.0:bafybeig5byt5urg2d2bsecufxe5ql7f4mezg3mekfleeh32nmuusx66p4y
- valory/mech:0.1.0:bafybeidwpijhdwj5abewa44k3tzxuanxykzmgnnffeq7re2rxp7pqbd2ou
- valory/conditional_tokens:0.1.0:bafybeibnzmqmeph4cj5vfh3s622mo2o5627vjjwc6bptrhj4dk65mzgvhe
- valory/realitio:0.1.0:bafybeietgux6kkhdquspy35qera7gjwwqwrremmoeatjzwwokjb2lzsata
- valory/realitio_proxy:0.1.0:bafybeidx37xzjjmapwacedgzhum6grfzhp5vhouz4zu3pvpgdy5pgb2fr4
- valory/agent_registry:0.1.0:bafybeifsb2krg4qnr4nxdrhcdgpncfr5ra2nahebvn2f2yff7ebwe7ooae
- valory/transfer_nft_condition:0.1.0:bafybeihnict3irtvnyxtkwyg6wphe44wz3dogijiha45xrkcrh5ktq2lsi
protocols:
- valory/contract_api:1.0.0:bafybeidgu7o5llh26xp3u3ebq3yluull5lupiyeu6iooi2xyymdrgnzq5i
- valory/ledger_api:1.0.0:bafybeihdk6psr4guxmbcrc26jr2cbgzpd5aljkqvpwo64bvaz7tdti2oni
- valory/ipfs:0.1.0:bafybeiftxi2qhreewgsc5wevogi7yc5g6hbcbo4uiuaibauhv3nhfcdtvm
- valory/http:1.0.0:bafybeifugzl63kfdmwrxwphrnrhj7bn6iruxieme3a4ntzejf6kmtuwmae
skills:
- valory/abstract_round_abci:0.1.0:bafybeiar2yhzxacfe3qqamqhaihtlcimquwedffctw55sowx6rac3cm3ui
- valory/market_manager_abci:0.1.0:bafybeicymkyk7e5rohauml6xazai6mv2rqd3euz3ifbk2ftfkylhpgo4ra
- valory/transaction_settlement_abci:0.1.0:bafybeic3tccdjypuge2lewtlgprwkbb53lhgsgn7oiwzyrcrrptrbeyote
- valory/mech_interact_abci:0.1.0:bafybeih2cck5xu6yaibomwtm5zbcp6llghr3ighdnk56fzwu3ihu5xx35e
behaviours:
  main:
    args: {}
    class_name: AgentDecisionMakerRoundBehaviour
handlers:
  abci:
    args: {}
    class_name: ABCIHandler
  contract_api:
    args: {}
    class_name: ContractApiHandler
  http:
    args: {}
    class_name: HttpHandler
  ipfs:
    args: {}
    class_name: IpfsHandler
  ledger_api:
    args: {}
    class_name: LedgerApiHandler
  signing:
    args: {}
    class_name: SigningHandler
  tendermint:
    args: {}
    class_name: TendermintHandler
models:
  abci_dialogues:
    args: {}
    class_name: AbciDialogues
  benchmark_tool:
    args:
      log_dir: /logs
    class_name: BenchmarkTool
  contract_api_dialogues:
    args: {}
    class_name: ContractApiDialogues
  http_dialogues:
    args: {}
    class_name: HttpDialogues
  ipfs_dialogues:
    args: {}
    class_name: IpfsDialogues
  ledger_api_dialogues:
    args: {}
    class_name: LedgerApiDialogues
  params:
    args:
      cleanup_history_depth: 1
      cleanup_history_depth_current: null
      drand_public_key: 868f005eb8e6e4ca0a47c8a77ceaa5309a47978a7c71bc5cce96366b5d7a569937c529eeda66c7293784a9402801af31
      genesis_config:
        genesis_time: '2022-05-20T16:00:21.735122717Z'
        chain_id: chain-c4daS1
        consensus_params:
          block:
            max_bytes: '22020096'
            max_gas: '-1'
            time_iota_ms: '1000'
          evidence:
            max_age_num_blocks: '100000'
            max_age_duration: '172800000000000'
            max_bytes: '1048576'
          validator:
            pub_key_types:
            - ed25519
          version: {}
        voting_power: '10'
      keeper_timeout: 30.0
      max_attempts: 10
      max_healthcheck: 120
      multisend_address: '0x0000000000000000000000000000000000000000'
      multisend_batch_size: 1
      on_chain_service_id: null
      request_retry_delay: 1.0
      request_timeout: 10.0
      reset_pause_duration: 10
      reset_tendermint_after: 2
      retry_attempts: 400
      retry_timeout: 3
      round_timeout_seconds: 350.0
      service_id: decision_maker
      service_registry_address: null
      agent_registry_address: '0x0000000000000000000000000000000000000000'
      setup:
        all_participants:
        - '0x0000000000000000000000000000000000000000'
        safe_contract_address: '0x0000000000000000000000000000000000000000'
        consensus_threshold: null
      share_tm_config_on_startup: false
      sleep_time: 1
      use_slashing: false
      slash_cooldown_hours: 3
      slash_threshold_amount: 10000000000000000
      light_slash_unit_amount: 5000000000000000
      serious_slash_unit_amount: 8000000000000000
      tendermint_check_sleep_delay: 3
      tendermint_com_url: http://localhost:8080
      tendermint_max_retries: 5
      tendermint_p2p_url: localhost:26656
      tendermint_url: http://localhost:26657
      tx_timeout: 10.0
      use_termination: false
      mech_contract_address: '0x77af31de935740567cf4ff1986d04b2c964a786a'
      mech_request_price: null
      mech_chain_id: gnosis
      mech_wrapped_native_token_address: '0xe91D153E0b41518A2Ce8Dd3D7944Fa863463a97d'
      mech_interaction_sleep_time: 10
      creator_per_subgraph:
        omen_subgraph: []
      slot_count: 2
      opening_margin: 300
      languages:
      - en_US
      average_block_time: 5
      abt_error_mult: 5
      the_graph_error_message_key: message
      the_graph_payment_required_error: payment required for subsequent requests for
        this API key
      sample_bets_closing_days: 10
      trading_strategy: strategy_name
      use_fallback_strategy: true
      bet_threshold: 100000000000000000
      blacklisting_duration: 3600
      ipfs_address: https://gateway.autonolas.tech/ipfs/
      tools_accuracy_hash: QmR8etyW3TPFadNtNrW54vfnFqmh8vBrMARWV76EmxCZyk
      prompt_template: With the given question "@{question}" and the `yes` option
        represented by `@{yes}` and the `no` option represented by `@{no}`, what are
        the respective probabilities of `p_yes` and `p_no` occurring?
      dust_threshold: 10000000000000
      conditional_tokens_address: '0xCeAfDD6bc0bEF976fdCd1112955828E00543c0Ce'
      realitio_proxy_address: '0xAB16D643bA051C11962DA645f74632d3130c81E2'
      realitio_address: '0x79e32aE03fb27B07C89c0c568F80287C01ca2E57'
      redeem_round_timeout: 3600.0
      event_filtering_batch_size: 5000
      reduce_factor: 0.25
      max_filtering_retries: 6
      minimum_batch_size: 500
      redeeming_batch_size: 5
      store_path: data
      slippage: 0.01
      policy_epsilon: 0.1
      use_subgraph_for_redeeming: true
      use_nevermined: true
      mech_to_subscription_params:
      - - base_url
        - https://marketplace-api.gnosis.nevermined.app/api/v1/metadata/assets/ddo
      - - did
        - did:nv:0ea01d5de3b34e3792db825f2a5f5595c393c68b19fd5efdacd00fcc63a53483
      - - escrow_payment_condition_address
        - '0x9dDC4F1Ea5b94C138A23b60EC48c0d01d172629a'
      - - lock_payment_condition_address
        - '0xDE85A368Ee6f374d236500d176814365370778dA'
      - - transfer_nft_condition_address
        - '0xbBa4A25262745a55f020D0a3E9a82c25bb6F4979'
      - - token_address
        - '0xa30DE8C6aC39B825192e5F1FADe0770332D279A8'
      - - order_address
        - '0xc7751eff5396a846e7bc83ac31d3cb7d37cb49e4'
      - - nft_amount
        - '100'
      - - payment_token
        - '0x0000000000000000000000000000000000000000'
      - - order_address
        - '0xc7751eff5396a846e7bc83ac31d3cb7d37cb49e4'
      - - price
        - '1000000000000000000'
      irrelevant_tools:
      - openai-text-davinci-002
      - openai-text-davinci-003
      - openai-gpt-3.5-turbo
      - openai-gpt-4
      - stabilityai-stable-diffusion-v1-5
      - stabilityai-stable-diffusion-xl-beta-v2-2-2
      - stabilityai-stable-diffusion-512-v2-1
      - stabilityai-stable-diffusion-768-v2-1
      tool_punishment_multiplier: 1
      contract_timeout: 300.0
      file_hash_to_strategies_json:
      - - hash
        - - strategy_name
      strategies_kwargs:
      - - bet_kelly_fraction
        - 1.0
      - - floor_balance
        - 500000000000000000
      - - bet_amount_per_threshold
        - 0.0: 0
          0.1: 0
          0.2: 0
          0.3: 0
          0.4: 0
          0.5: 0
          0.6: 0
          0.7: 0
          0.8: 0
          0.9: 0
          1.0: 0
      service_endpoint: trader.staging.autonolas.tech/
      rpc_sleep_time: 10
    class_name: DecisionMakerParams
  benchmarking_mode:
    args:
      enabled: false
      native_balance: 10000000000000000000
      collateral_balance: 10000000000000000000
      mech_cost: 10000000000000000
      pool_fee: 20000000000000000
      outcome_token_amounts:
      - 11000000000000000000
      - 9000000000000000000
      outcome_token_marginal_prices:
      - 0.4
      - 0.6
      sep: ','
      dataset_filename: benchmark_data.csv
      question_field: question
      question_id_field: question_id
      answer_field: answer
      p_yes_field_part: p_yes_
      p_no_field_part: p_no_
      confidence_field_part: confidence_
      part_prefix_mode: true
      bet_amount_field: collateral_amount
      results_filename: benchmarking_results.csv
      randomness: benchmarking_randomness
    class_name: BenchmarkingMode
  acc_info_fields:
    args:
      tool: tool
      requests: total_requests
      accuracy: tool_accuracy
      sep: ','
    class_name: AccuracyInfoFields
  trades_subgraph:
    args:
      api_id: trades
      headers:
        Content-Type: application/json
      method: POST
      parameters: {}
      response_key: data:fpmmTrades
      response_type: list
      error_key: errors
      error_index: 0
      error_type: dict
      retries: 5
      url: https://api.thegraph.com/subgraphs/name/protofire/omen-xdai
    class_name: TradesSubgraph
  conditional_tokens_subgraph:
    args:
      api_id: conditional_tokens
      headers:
        Content-Type: application/json
      method: POST
      parameters: {}
      response_key: data:user:userPositions
      response_type: list
      error_key: errors
      error_index: 0
      error_type: dict
      retries: 5
      url: https://api.thegraph.com/subgraphs/name/gnosis/conditional-tokens-gc
    class_name: ConditionalTokensSubgraph
  realitio_subgraph:
    args:
      api_id: realitio
      headers:
        Content-Type: application/json
      method: POST
      parameters: {}
      response_key: data:answers
      response_type: list
      error_key: errors
      error_index: 0
      error_type: dict
      retries: 5
      url: https://api.thegraph.com/subgraphs/name/realityeth/realityeth-gnosis
    class_name: RealitioSubgraph
  agent_tools:
    args:
      api_id: agent_tools
      headers:
        Content-Type: application/json
      method: GET
      parameters: {}
      response_key: tools
      response_type: list
      retries: 5
      url: ''
    class_name: AgentToolsSpecs
  requests:
    args: {}
    class_name: Requests
  signing_dialogues:
    args: {}
    class_name: SigningDialogues
  state:
    args: {}
    class_name: SharedState
  tendermint_dialogues:
    args: {}
    class_name: TendermintDialogues
dependencies:
  hexbytes:
    version: ==0.3.1
  hypothesis:
    version: ==6.21.6
  py-multibase:
    version: ==1.0.3
  py-multicodec:
    version: ==0.2.1
  web3:
    version: <7,>=6.0.0
  eth-abi:
    version: ==4.0.0
  pyyaml:
    version: <=6.0.1,>=3.10
is_abstract: true
